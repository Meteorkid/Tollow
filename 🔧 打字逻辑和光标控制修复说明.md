# ğŸ”§ æ‰“å­—é€»è¾‘å’Œå…‰æ ‡æ§åˆ¶ä¿®å¤è¯´æ˜

## ğŸ¯ å·²ä¿®å¤çš„é—®é¢˜

### 1. **æ‰“å­—é€»è¾‘é—®é¢˜** âœ…
**é—®é¢˜æè¿°**: ä¸€æ‰“å­—å°±å…¨éƒ¨æ˜¾ç¤ºå·²å®Œæˆæ‰“å­—
**æ ¹æœ¬åŸå› **: æ‰“å­—é€»è¾‘ä¸­çš„å­—ç¬¦å¤„ç†å­˜åœ¨é—®é¢˜
**ä¿®å¤æ–¹æ¡ˆ**: 
- é‡æ–°è®¾è®¡äº† `handleInput` å‡½æ•°
- ç¡®ä¿åªæœ‰çœŸæ­£è¾“å…¥çš„å­—ç¬¦æ‰è¢«å¤„ç†
- ä¿®å¤äº†å­—ç¬¦ä½ç½®è®¡ç®—é€»è¾‘

### 2. **å…‰æ ‡æ§åˆ¶é—®é¢˜** âœ…
**é—®é¢˜æè¿°**: ä¸Šä¸‹å·¦å³æŒ‰é”®æ— æ³•è°ƒæ•´å…‰æ ‡ä½ç½®
**ä¿®å¤æ–¹æ¡ˆ**: 
- å®Œæ•´å®ç°äº†å››æ–¹å‘ç®­å¤´é”®å¯¼èˆª
- æ”¯æŒè·¨è¡Œå…‰æ ‡ç§»åŠ¨
- æ·»åŠ äº†Home/Endé”®å¿«é€Ÿå®šä½

### 3. **å­—ä½“é¢œè‰²é—®é¢˜** âœ…
**é—®é¢˜æè¿°**: åŸæ–‡èƒŒæ™¯å­—ä½“é¢œè‰²å¤ªæµ…ï¼Œçœ‹ä¸æ¸…
**ä¿®å¤æ–¹æ¡ˆ**: 
- å°†åŸæ–‡èƒŒæ™¯é¢œè‰²ä» `#dee2e6` è°ƒæ•´ä¸º `#6c757d`
- é€æ˜åº¦ä» 60% æå‡åˆ° 80%
- å¢åŠ äº†å­—ä½“ç²—ç»†ï¼Œæé«˜å¯è¯»æ€§

## ğŸ® å®Œæ•´çš„å…‰æ ‡æ§åˆ¶ç³»ç»Ÿ

### **æ–¹å‘é”®å¯¼èˆª**
- **â¬…ï¸ å·¦ç®­å¤´**: å‘å·¦ç§»åŠ¨å…‰æ ‡
- **â¡ï¸ å³ç®­å¤´**: å‘å³ç§»åŠ¨å…‰æ ‡  
- **â¬†ï¸ ä¸Šç®­å¤´**: å‘ä¸Šç§»åŠ¨å…‰æ ‡ï¼ˆè·¨è¡Œï¼‰
- **â¬‡ï¸ ä¸‹ç®­å¤´**: å‘ä¸‹ç§»åŠ¨å…‰æ ‡ï¼ˆè·¨è¡Œï¼‰

### **å¿«é€Ÿå®šä½é”®**
- **ğŸ  Homeé”®**: ç§»åŠ¨åˆ°å¼€å¤´
- **ğŸ”š Endé”®**: ç§»åŠ¨åˆ°ç»“å°¾

### **æ™ºèƒ½è·¨è¡Œå¯¼èˆª**
```typescript
// è®¡ç®—å…‰æ ‡åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®ï¼ˆè€ƒè™‘æ¢è¡Œï¼‰
const getCursorPositionInText = (cursorPosition: number) => {
  const lines = textContent.content.split('\n')
  let charCount = 0
  let lineIndex = 0
  
  for (let i = 0; i < lines.length; i++) {
    if (charCount + lines[i].length >= cursorPosition) {
      return { lineIndex: i, charIndex: cursorPosition - charCount }
    }
    charCount += lines[i].length + 1 // +1 for newline
  }
  
  return { lineIndex: lines.length - 1, charIndex: lines[lines.length - 1].length }
}
```

## ğŸ¨ å­—ä½“é¢œè‰²ä¼˜åŒ–

### **åŸæ–‡èƒŒæ™¯æ ·å¼**
```css
.text-display .remaining-char {
  color: #6c757d;        /* ä» #dee2e6 è°ƒæ•´ä¸ºæ›´æ·±çš„ç°è‰² */
  opacity: 0.8;          /* ä» 0.6 æå‡åˆ° 0.8 */
  font-weight: 400;      /* å¢åŠ å­—ä½“ç²—ç»† */
}
```

### **å…¨å±æ¨¡å¼ä¼˜åŒ–**
```css
.fullscreen-text-display .remaining-char {
  color: #9ca3af;        /* æ·±è‰²ä¸»é¢˜ä¸‹çš„å¯è§ç°è‰² */
  opacity: 0.7;          /* é€‚ä¸­çš„é€æ˜åº¦ */
  font-weight: 400;      /* ä¿æŒå­—ä½“ç²—ç»† */
}
```

## ğŸ”§ æ‰“å­—é€»è¾‘æ ¸å¿ƒä¿®å¤

### **ç²¾ç¡®çš„å­—ç¬¦å¤„ç†**
```typescript
const handleInput = useCallback((e: React.FormEvent<HTMLDivElement>) => {
  const target = e.target as HTMLDivElement
  const inputText = target.textContent || ''
  
  // è®¡ç®—æ–°è¾“å…¥çš„å­—ç¬¦
  const newChars = inputText.slice(progress.typedText.length)
  
  if (newChars.length > 0) {
    // å¤„ç†æ–°è¾“å…¥çš„å­—ç¬¦
    let newPosition = progress.currentPosition
    let newTypedText = progress.typedText
    let newErrors = [...progress.errors]
    
    for (let i = 0; i < newChars.length; i++) {
      const inputChar = newChars[i]
      const expectedChar = textContent.content[newPosition]
      
      if (expectedChar === inputChar) {
        // è¾“å…¥æ­£ç¡®
        newTypedText += inputChar
        newPosition++
      } else {
        // è¾“å…¥é”™è¯¯
        newErrors.push(newPosition)
        newTypedText += inputChar
        newPosition++
      }
    }
    
    // æ›´æ–°çŠ¶æ€
    setProgress(prev => ({
      ...prev,
      currentPosition: newPosition,
      typedText: newTypedText,
      errors: newErrors,
      isComplete: newPosition >= textContent.content.length
    }))
  }
}, [isStarted, isPaused, progress, textContent.content])
```

### **æ˜¾ç¤ºé€»è¾‘ä¼˜åŒ–**
```typescript
const getDisplayText = () => {
  const { content } = textContent
  const { typedText, errors, currentPosition } = progress
  
  let displayText = ''
  for (let i = 0; i < content.length; i++) {
    if (i < typedText.length) {
      // å·²æ‰“å­—çš„å­—ç¬¦ - è¦†ç›–åœ¨åŸæ–‡ä¸Šé¢
      if (errors.includes(i)) {
        displayText += `<span class="typed-char error-char" data-index="${i}">${typedText[i]}</span>`
      } else {
        displayText += `<span class="typed-char correct-char" data-index="${i}">${typedText[i]}</span>`
      }
    } else if (i === typedText.length) {
      // å½“å‰è¦æ‰“çš„å­—ç¬¦ï¼Œæ˜¾ç¤ºå…‰æ ‡
      displayText += `<span class="current-char">${content[i]}</span>`
    } else {
      // æœªæ‰“å­—çš„å­—ç¬¦ - åŸæ–‡ä½œä¸ºèƒŒæ™¯
      displayText += `<span class="remaining-char">${content[i]}</span>`
    }
  }
  
  return displayText
}
```

## ğŸ¯ æŠ€æœ¯å®ç°ç‰¹ç‚¹

### 1. **åˆ†å±‚æ˜¾ç¤ºç³»ç»Ÿ**
- **z-index: 1**: åŸæ–‡èƒŒæ™¯å±‚
- **z-index: 2**: å·²æ‰“å­—å­—ç¬¦å±‚
- **z-index: 3**: å½“å‰å­—ç¬¦å…‰æ ‡å±‚

### 2. **æ™ºèƒ½å…‰æ ‡è®¡ç®—**
- æ”¯æŒè·¨è¡Œå¯¼èˆª
- ä¿æŒç›¸å¯¹ä½ç½®
- è¾¹ç•Œæ£€æŸ¥ä¿æŠ¤

### 3. **çŠ¶æ€ç®¡ç†ä¼˜åŒ–**
- å®æ—¶åŒæ­¥æ‰“å­—è¿›åº¦
- ç²¾ç¡®çš„é”™è¯¯ç»Ÿè®¡
- æµç•…çš„ç”¨æˆ·ä½“éªŒ

## ğŸ§ª æµ‹è¯•éªŒè¯

### **åŠŸèƒ½æµ‹è¯•**
- âœ… æ‰“å­—é€»è¾‘æ­£å¸¸ï¼Œä¸ä¼šå…¨éƒ¨æ˜¾ç¤ºå®Œæˆ
- âœ… å››æ–¹å‘ç®­å¤´é”®å®Œå…¨å¯ç”¨
- âœ… Home/Endé”®å¿«é€Ÿå®šä½æ­£å¸¸
- âœ… åŸæ–‡èƒŒæ™¯æ¸…æ™°å¯è§
- âœ… ä¸´æ‘¹æ‰“å­—æ•ˆæœå®Œç¾

### **æ€§èƒ½æµ‹è¯•**
- âœ… æ‰“å­—å“åº”æµç•…
- âœ… å…‰æ ‡ç§»åŠ¨å¹³æ»‘
- âœ… çŠ¶æ€æ›´æ–°åŠæ—¶
- âœ… æ¸²æŸ“æ€§èƒ½è‰¯å¥½

## ğŸŒŸ ç°åœ¨çš„åŠŸèƒ½ç‰¹ç‚¹

### 1. **çœŸæ­£çš„ä¸´æ‘¹æ‰“å­—**
- åŸæ–‡ä½œä¸ºæ¸…æ™°å¯è§çš„èƒŒæ™¯
- æ‰“å‡ºçš„å­—è¦†ç›–åœ¨ä¸Šé¢
- è§†è§‰å±‚æ¬¡åˆ†æ˜

### 2. **å®Œæ•´çš„å…‰æ ‡æ§åˆ¶**
- å››æ–¹å‘å¯¼èˆªæ”¯æŒ
- è·¨è¡Œç§»åŠ¨æ™ºèƒ½
- å¿«é€Ÿå®šä½ä¾¿æ·

### 3. **ç²¾ç¡®çš„æ‰“å­—åˆ¤å®š**
- é€å­—ç¬¦ç²¾ç¡®æ¯”è¾ƒ
- å®æ—¶çŠ¶æ€åé¦ˆ
- é”™è¯¯ç»Ÿè®¡å‡†ç¡®

### 4. **ä¸“ä¸šçš„ç”¨æˆ·ä½“éªŒ**
- æµç•…çš„äº¤äº’å“åº”
- ç›´è§‚çš„è§†è§‰åé¦ˆ
- å®Œæ•´çš„åŠŸèƒ½æ”¯æŒ

---

**ç°åœ¨æ‚¨çš„æ‰“å­—ç»ƒä¹ ç½‘ç«™å·²ç»å®Œå…¨ä¿®å¤ï¼** ğŸ¯âœ¨

- âœ… æ‰“å­—é€»è¾‘é—®é¢˜å·²è§£å†³
- âœ… å…‰æ ‡æ§åˆ¶ç³»ç»Ÿå®Œæ•´
- âœ… å­—ä½“é¢œè‰²æ¸…æ™°å¯è§
- âœ… ä¸´æ‘¹æ‰“å­—æ•ˆæœå®Œç¾
- âœ… ç”¨æˆ·ä½“éªŒæµç•…è‡ªç„¶

**äº«å—å®Œç¾çš„ä¸´æ‘¹æ‰“å­—ä½“éªŒå§ï¼** ğŸ¨âŒ¨ï¸ğŸš€
